---
layout: base.njk
title: Risultati
---

<div class="page-header">
    <h1>Risultati</h1>
</div>

<section class="section">
    <div class="container">

        <!-- Filtro per serie -->
        {%- set series = [] -%}
        {%- for match in collections.risultati -%}
            {%- if match.data.serie and match.data.serie not in series -%}
                {%- set series = (series.push(match.data.serie), series) -%}
            {%- endif -%}
        {%- endfor -%}

        {%- if series.length > 1 -%}
        <div class="filter-bar" id="filterBar">
            <button class="filter-btn active" data-filter="tutti">Tutti</button>
            {%- for s in series -%}
            <button class="filter-btn" data-filter="{{ s }}">{{ s }}</button>
            {%- endfor -%}
        </div>
        {%- endif -%}

        <div class="risultati-grid" id="risultatiGrid">
            {%- for match in collections.risultati -%}
            <div class="risultato-card" data-serie="{{ match.data.serie }}">
                <div class="risultato-header">
                    <span class="risultato-serie">{{ match.data.serie }}</span>
                    <span class="risultato-data">{{ match.data.date | shortDate }}</span>
                </div>
                <div class="match-display">
                    <div class="match-team {% if match.data.home_score > match.data.away_score %}winner{% endif %}">
                        {{ match.data.home_team }}
                    </div>
                    <div class="match-score">{{ match.data.home_score }} â€” {{ match.data.away_score }}</div>
                    <div class="match-team {% if match.data.away_score > match.data.home_score %}winner{% endif %}">
                        {{ match.data.away_team }}
                    </div>
                </div>
                {%- if match.data.notes -%}
                <p class="match-notes">{{ match.data.notes }}</p>
                {%- endif -%}
            </div>
            {%- else -%}
            <div class="empty-state"><p>Nessun risultato ancora. Aggiungili dal pannello admin!</p></div>
            {%- endfor -%}
        </div>

        <div id="noResults" style="display:none;" class="empty-state mt-2">
            <p>Nessun risultato per questa serie.</p>
        </div>

    </div>
</section>

<script>
    const filterBtns = document.querySelectorAll('.filter-btn');
    const cards = document.querySelectorAll('.risultato-card');
    const noResults = document.getElementById('noResults');

    filterBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            const filter = btn.dataset.filter;
            filterBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            let visible = 0;
            cards.forEach(card => {
                const show = filter === 'tutti' || card.dataset.serie === filter;
                card.style.display = show ? '' : 'none';
                if (show) visible++;
            });

            noResults.style.display = visible === 0 ? 'block' : 'none';
        });
    });
</script>
